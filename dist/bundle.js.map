{"version":3,"sources":["webpack:///webpack/bootstrap e04349b91310c4389a6b","webpack:///./src/content.js","webpack:///./src/node.js"],"names":["Node","require","console","log","chrome","runtime","onMessage","addListener","request","sender","sendResponse","command","url","neighborUrls","isExpanded","module","exports"],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;;;AC7DA;AACA;AACA;;AAEA,IAAIA,OAAO,mBAAAC,CAAQ,CAAR,CAAX;;AAEAC,QAAQC,GAAR,CAAYH,IAAZ;;AAEA;AACA;;;;;;AAMA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACAI,OAAOC,OAAP,CAAeC,SAAf,CAAyBC,WAAzB,CAAqC,UAASC,OAAT,EAAkBC,MAAlB,EAA0BC,YAA1B,EAAwC;AACzER,YAAQC,GAAR,CAAY,kCAAZ;AACA,QAAIK,QAAQG,OAAR,IAAmB,UAAvB,EAAmC;AAC/B;AACA;AACA;AACAD,qBAAa,MAAb;AACH;AACJ,CARD;;AAUA;AACA;AACA;;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqFA;;;;;AAKC;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BDR,QAAQC,GAAR,CAAY,wBAAZ;;AAEA,Q;;;;;;;;;AC/JA;AACA;AACA;;AAEA,SAASH,IAAT,CAAcY,GAAd,EAAmBC,YAAnB,EAAiC;AAC7B;AACA,SAAKD,GAAL,GAAWA,GAAX;AACA;AACA,SAAKC,YAAL,GAAoBA,YAApB;AACA;AACA,SAAKC,UAAL,GAAkB,KAAlB;AACH;;AAEDC,OAAOC,OAAP,GAAiBhB,IAAjB,C","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap e04349b91310c4389a6b","//==============================================================================\n// For parsing the page for links when triggered\n//==============================================================================\n\nvar Node = require('./node');\n\nconsole.log(Node);\n\n// get jquery\n/*\nvar script = document.createElement('script');\nscript.src = '//code.jquery.com/jquery-1.11.0.min.js';\ndocument.getElementsByTagName('head')[0].appendChild(script);\n*/\n\n// a map of url to graph node\n//var nodeMap = {};\n\n//==============================================================================\n// listen for incoming messages\n//==============================================================================\n\n// request contains parameters sent to the listener\n// sender is an object containing the id of the plugin that sent the message - don't think this is relevant unless communicating with other plugins\n// sendResponse is a function which returns a response to the function that send the message\nchrome.runtime.onMessage.addListener(function(request, sender, sendResponse) {\n    console.log('received message from background');\n    if (request.command == 'webgraph') {\n        // generate the graph\n        //generateGraph(request.rootUrl);\n        // respond to background... really not needed at this point... or ever\n        sendResponse('test');\n    }\n});\n\n//==============================================================================\n// Graph construction\n//==============================================================================\n\n/*\nfunction generateGraph(rootUrl) {\n    // remove www if need be\n    var url = getUrl(rootUrl);\n    // get the urls from the active tab\n    var urls = getUrls(document);\n    // construct the root\n    var root = new Node(url, urls);\n    // add the root to the map\n    nodeMap[url] = root;\n    // expand the root to generate more of the graph\n    expand(root, 1);\n}\n\nfunction expand(root, levelsToExpand) {\n    // base cases\n    if (levelsToExpand == 0) {\n        return;\n    }\n\n    if (root.isExpanded) {\n        return;\n    }\n\n    // set the root node as expanded\n    root.isExpanded = true;\n\n    // expand it by generating a new node for each neighbor url\n    var urls = root.neighborUrls;\n    for (var i = 0; i < urls.length; i++) {\n        generateNode(urls[i], function(node) {\n            if (!node.isExpanded) {\n                expand(node, levelsToExpand - 1);\n            }\n        });\n    }\n}\n\nfunction generateNode(url, cb) {\n    // see if the graph already contains a node corresponding to this url\n    if (nodeMap[url]) {\n        cb(nodeMap[url]);\n    }\n\n    // no node has been generated\n    $.ajax({\n        url: url,\n        success: function(html) {\n            console.log(html);\n            // parse the urls from the html string\n            var urls = parseUrlsFromHtml(html);\n            // add a new node to the nodeMap!!!\n            var node = new Node(url, urls);\n            nodeMap[url] = node;\n            cb(node);\n        }\n    });\n}\n\n//==============================================================================\n// Get urls from the active tab\n//==============================================================================\n\nfunction getUrls(document) {\n    // get all the link elements in the document\n    var linkElements = document.links;\n\n    // collect the urls\n    var urls = {};\n    var href;\n    var url;\n    for (var i = 0; i < linkElements.length; i++) {\n        href = linkElements[i].href;\n        // get the url from the href, if the href is for a url\n        url = getUrl(href);\n        if (url) {\n            urls[url] = true;\n        }\n    }\n\n    // return just the urls as an array\n    return Object.keys(urls);\n}\n*/\n\n/**\n * We have an href. Could be a url or could be something else. If a url, could be\n * apple.com/iphone or www.apple.com/iphone. We want both these urls to be considered\n * the same, so we remove the www.\n */\n /*\nfunction getUrl(href) {\n    var re = /(?:https?:\\/\\/(www\\.)?)?([-a-zA-Z0-9@:%._\\+~#=]{2,256}\\.[a-z]{2,4})\\b([-a-zA-Z0-9@:%_\\+.~#?&//=]*)/;\n    var results = href.match(re);\n    if (results) {\n        var fullMatch = results[0];\n        var parts = fullMatch.split('.');\n        if (parts[0] == 'www') {\n            // remove www\n            return fullMatch.substring(4);\n        }\n        return fullMatch;\n    }\n    return null;\n}\n\n//==============================================================================\n// HTML parsing\n//==============================================================================\n\nfunction parseUrlsFromHtml(html) {\n    // create a dummy DOM object from the html string\n    var elem = document.createElement('html');\n    elem.innerHtml = html;\n    return getUrls(elem);\n}\n*/\n\nconsole.log('Content script loaded.');\n\n// =END=\n\n\n\n// WEBPACK FOOTER //\n// ./src/content.js","//==============================================================================\n// Represents a node in the graph\n//==============================================================================\n\nfunction Node(url, neighborUrls) {\n    // the node's url\n    this.url = url;\n    // a list of all the urls in the html of the page this node represents\n    this.neighborUrls = neighborUrls;\n    // whether the node has been expanded\n    this.isExpanded = false;\n}\n\nmodule.exports = Node;\n\n\n\n// WEBPACK FOOTER //\n// ./src/node.js"],"sourceRoot":""}